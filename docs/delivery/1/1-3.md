# [1-3] Initialize Go module for backend API

[Back to task list](./tasks.md)

## Description

Initialize a Go module in the `api/` directory with Go 1.25+. Create a basic main.go file with a simple HTTP server to verify the setup works, and configure golangci-lint for code quality.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-19 12:00:00 | Created | N/A | Proposed | Task file created | User |
| 2025-10-19 13:20:00 | Status Change | Proposed | Agreed | Task approved to begin implementation | User |
| 2025-10-19 13:20:01 | Status Change | Agreed | InProgress | Started implementation | AI_Agent |
| 2025-10-19 13:55:00 | Status Change | InProgress | Review | Go module initialized and server tested | AI_Agent |
| 2025-10-19 14:15:00 | Status Change | Review | Done | Task approved and completed | User |

## Requirements

1. Initialize Go module with appropriate module path
2. Set Go version to 1.25+
3. Create basic main.go with HTTP server
4. Configure golangci-lint with .golangci.yml
5. Ensure code compiles and runs

## Implementation Plan

1. Run `go mod init` in api/ directory with module path `github.com/username/atlas/api`
2. Create `api/cmd/server/main.go` with:
   - Basic HTTP server setup
   - Health check endpoint
   - Graceful shutdown handling
3. Create `api/.golangci.yml` configuration
4. Test compilation with `go build ./cmd/server`
5. Test running with `go run ./cmd/server`

## Test Plan

**Objective**: Verify Go module is properly initialized and basic server works

**Key Test Scenarios**:
1. `go mod tidy` runs without errors
2. `go build ./cmd/server` compiles successfully
3. Server starts and listens on specified port
4. Health check endpoint returns 200 OK
5. `golangci-lint run` executes (may have no findings yet)

**Success Criteria**: All scenarios pass, server is functional

## Verification

- [x] `api/go.mod` exists with Go 1.25+ (1.25.1)
- [x] `api/cmd/server/main.go` exists
- [x] `api/.golangci.yml` exists
- [x] `go mod tidy` runs without errors
- [x] `go build ./cmd/server` compiles successfully (7.8M binary created)
- [x] Server starts and responds to health check (returns {"status":"healthy"})
- [x] golangci-lint is configured and passes all checks

## Implementation Notes

- Initialized Go module with path `github.com/sean/atlas/api`
- Go version 1.25.1 is set in go.mod
- Created HTTP server with:
  - Health check endpoint at `/health` returning JSON status
  - Root endpoint at `/` returning API info
  - Graceful shutdown handling with 30s timeout
  - Configurable port via PORT environment variable (defaults to 8080)
  - ReadHeaderTimeout set to prevent Slowloris attacks
- Used constants for magic numbers (defaultPort, shutdownTimeout, readHeaderTimeout)
- golangci-lint configuration includes comprehensive linters for code quality
- golangci-lint installed and runs successfully with zero errors
- Fixed all linter issues:
  - Proper error checking for w.Write() calls
  - Fixed defer/fatal pattern in shutdown logic
  - Updated deprecated linter configurations
- Server compiles and runs successfully, responding to HTTP requests

## Files Modified

- `api/go.mod` (new)
- `api/go.sum` (new)
- `api/cmd/server/main.go` (new)
- `api/.golangci.yml` (new)

