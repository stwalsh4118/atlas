# [1-8] Verify infrastructure setup (E2E CoS Test)

[Back to task list](./tasks.md)

## Description

Perform end-to-end verification that all infrastructure components are properly set up and working together. This task validates that all Conditions of Satisfaction from PBI 1 are met.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-19 12:00:00 | Created | N/A | Proposed | Task file created | User |

## Requirements

This task verifies all acceptance criteria from PBI 1:

1. ✅ Docker Compose file exists and defines all required services
2. ✅ PostgreSQL + PostGIS container starts successfully
3. ✅ Can connect to PostgreSQL on localhost:5432
4. ✅ PostGIS extension is available and queryable
5. ✅ Directory structure created for backend, frontends, and docs
6. ✅ .env.example file with all required environment variables
7. ✅ .gitignore properly excludes node_modules, vendor, .env, etc.
8. ✅ README.md with setup instructions and project overview
9. ✅ Go module initialized in api/ directory
10. ✅ package.json initialized in both frontend directories
11. ✅ golangci-lint configuration present
12. ✅ ESLint configuration present for frontends

## Implementation Plan

1. Start from clean state (remove any existing containers/volumes)
2. Follow README.md instructions exactly as a new developer would
3. Verify each acceptance criterion
4. Document any issues or gaps
5. Create checklist script if helpful for future verification

## Test Plan

**Objective**: Comprehensive end-to-end validation of entire infrastructure setup

**Test Environment**: Clean development environment following README.md from scratch

**Key Test Scenarios**:

1. **Docker Infrastructure**:
   - Start services with `docker-compose up -d`
   - Verify PostgreSQL container is healthy
   - Connect to database and enable PostGIS extension
   - Query PostGIS version successfully
   - Verify data persistence after container restart

2. **Go API Setup**:
   - Navigate to api/ directory
   - Run `go mod download`
   - Run `go build ./cmd/server`
   - Start API server
   - Verify health endpoint responds
   - Run `golangci-lint run`

3. **Next.js Frontend Setup**:
   - Navigate to web/nextjs/
   - Run `pnpm install`
   - Run `pnpm dev`
   - Verify application loads in browser
   - Run `pnpm build`
   - Run `pnpm lint`

4. **Vue Frontend Setup**:
   - Navigate to web/vue/
   - Run `pnpm install`
   - Run `pnpm dev`
   - Verify application loads in browser
   - Run `pnpm build`
   - Run `pnpm lint`

5. **Documentation and Configuration**:
   - Verify .env.example covers all services
   - Verify .gitignore excludes appropriate files
   - Verify README.md instructions are accurate and complete
   - Verify directory structure matches specification

**Mocking Strategy**: No mocking required - testing actual infrastructure

**Success Criteria**:
- All 12 acceptance criteria from PBI 1 are met
- Can follow README.md to fully set up development environment
- All services start and run without errors
- All linters pass
- All builds succeed

## Verification

### Core Infrastructure
- [ ] `docker-compose up -d` starts all services
- [ ] PostgreSQL container shows as healthy
- [ ] Can connect to database: `psql -h localhost -U postgres -d atlas`
- [ ] PostGIS extension available and returns version

### Go API
- [ ] `api/go.mod` exists with Go 1.25+
- [ ] `go build ./cmd/server` succeeds
- [ ] API server starts and responds to health check
- [ ] `golangci-lint run` executes successfully

### Next.js Frontend
- [ ] `web/nextjs/package.json` exists
- [ ] `pnpm install` succeeds
- [ ] `pnpm dev` starts dev server
- [ ] Application accessible in browser
- [ ] `pnpm build` succeeds
- [ ] `pnpm lint` passes

### Vue Frontend
- [ ] `web/vue/package.json` exists
- [ ] `pnpm install` succeeds
- [ ] `pnpm dev` starts dev server
- [ ] Application accessible in browser
- [ ] `pnpm build` succeeds
- [ ] `pnpm lint` passes

### Documentation
- [ ] README.md is comprehensive and accurate
- [ ] .env.example includes all necessary variables
- [ ] .gitignore properly excludes generated files
- [ ] Directory structure matches PBI specification

### Overall
- [ ] All 12 acceptance criteria from PBI 1 are satisfied
- [ ] New developer can follow README.md successfully
- [ ] No errors or warnings in any service startup

## Files Modified

This task modifies no files - it only verifies existing setup. Any issues found should be fixed in the relevant task files (1-1 through 1-7).

